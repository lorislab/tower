<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://xmlns.jcp.org/jsf/composite/tower/password"
                xmlns:b="http://xmlns.jcp.org/jsf/composite/beefaces"
                template="/templates/editTemplate.xhtml">

    <ui:param name="menuParentSelected" value="SETTINGS" />
    <ui:param name="menuChildSelected" value="MAIL" />
    <ui:param name="pageTitle" value="Mail system" />
    <ui:param name="pageIcon" value="icon-mail-alt" />

    <ui:param name="vc" value="#{mailVC}" />
    <ui:param name="model" value="#{viewController.model}" />

    <ui:define name="metadata">
        <f:metadata>
            <f:viewAction action="#{mailVC.editAction.execute}" onPostback="true"/>
        </f:metadata>
    </ui:define>

    <ui:define name="form">	
        <b:checkbox id="enabled" value="#{model.enabled}" title="Enable email notification" />	
        <b:callout title="Server configuration">
            <b:input id="jndi" value="#{model.jndi}" title="JNDI" placeholder="JNDI service" />
        </b:callout>
        <b:callout id="b" title="Manual configuration">
            <b:checkbox id="ssl" value="#{model.ssl}" title="Enable SSL" />
            <b:input id="host" value="#{model.host}" title="Host" placeholder="SMTP server" />
            <b:input id="port" value="#{model.port}" title="Port" placeholder="SMTP port" type="number" />
            <b:input id="user" value="#{model.user}" title="User" placeholder="SMTP user authentication" />				
            <p:input id="password" controller="#{viewController.passwordVC}" value="#{model.password}" dialog="mailp"/>	
        </b:callout>
        <b:callout title="Templates configuration">
            <b:input id="server" value="#{model.server}" title="Server" placeholder="The server callback URL" />				
            <b:input id="url" value="#{model.url}" title="URL" placeholder="The server public URL" />
            <b:input id="locale" value="#{model.locale}" title="Locale" placeholder="The default locale" />
            <b:input id="from" value="#{model.from}" title="From" placeholder="The from email address" />
            <b:input id="contentType" value="#{model.contentType}" title="Content type" placeholder="The content type" />
            <b:input id="contentCharset" value="#{model.contentCharset}" title="Content char set" placeholder="The content char set" />
            <b:input id="transferEncoding" value="#{model.transferEncoding}" title="Transfer encoding" placeholder="The transfer encoding" />
        </b:callout>
    </ui:define>

    <ui:define name="button-right">
        <b:button type="success" ctr="#{timerVC.startAction}" title="Send test email" icon="mail-alt">
            <f:ajax event="click" render="@this" execute="@this"/>
        </b:button>        
    </ui:define>

    <ui:define name="modal">
        <p:dialog id="mailp" controller="#{viewController.passwordVC}"/>	
    </ui:define>

</ui:composition>

