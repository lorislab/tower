<ui:composition xmlns="http://www.w3.org/1999/xhtml" 
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:jsf="http://xmlns.jcp.org/jsf"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:h="http://xmlns.jcp.org/jsf/html"				
                template="/templates/template.xhtml">

	<ui:param name="menuParentSelected" value="SETTINGS" />
	<ui:param name="menuChildSelected" value="PROJECT" />
	<ui:param name="pageTitle" value="Projects" />
	<ui:param name="pageIcon" value="icon-award" />

    <ui:define name="body">
		<h:form id="searchForm">
			<div class="row">
                <div class="col-lg-12">	
					<div class="panel panel-default">
						<div class="panel-heading">
							<div class="input-group">
								<input type="search" placeholder="Search" class="form-control"></input>
								<span class="input-group-btn">
									<button class="btn btn-default" type="button"><i class="icon-erase"></i></button>
									<button class="btn btn-default"
											jsf:action="#{projectSVC.searchAction.execute}" jsf:rendered="#{projectSVC.searchAction.available}">
										<f:ajax render="searchForm:table" execute="@this"/>
										<i class="icon-arrows-cw"></i>
									</button>
									<a class="btn btn-default"
									   jsf:action="#{projectVC.createAction.execute}" jsf:rendered="#{projectVC.createAction.available}">
										<i class="icon-doc-text"></i>
									</a>									
								</span>				
							</div>			
						</div>						
						<table jsf:id="table" class="table table-striped sortable">
							<thead>
								<tr>
									<th> </th>	
									<th>Index</th>
									<th>Enabled</th>				
									<th>Name</th>
									<th>Bug tracking key</th>
								</tr>
							</thead>			
							<tbody>
								<ui:repeat var="project" value="#{projectSVC.result}" >
									<tr>
										<td>
											<a jsf:action="#{projectVC.openAction.execute}" jsf:rendered="#{projectVC.openAction.available}" > 					
												<i class="icon-pencil"></i>
												<f:param name="guid" value="#{project.guid}" />
											</a>
										</td>
										<td>#{project.index}</td>
										<td><i class="#{project.enabled ? 'icon-check': 'icon-check-empty'}"></i></td>
										<td>#{project.name}</td>												
										<td>#{project.btsId}</td>
									</tr>
								</ui:repeat>
							</tbody>
						</table>										
					</div>
				</div>
			</div>
		</h:form>
    </ui:define>

</ui:composition>

