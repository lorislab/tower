<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:composite="http://xmlns.jcp.org/jsf/composite"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <composite:interface>
        <composite:attribute name="system" required="true"/>
    </composite:interface>

    <composite:implementation>	        

        <div jsf:id="system" class="box box-solid #{not empty cc.attrs.system.build ? 'bg-light-blue' : 'bg-maroon'}">

            <div class="box-header">
                <div class="col-lg-10">
                    <h4>#{cc.attrs.system.model.name}
                        <small jsf:rendered="#{not empty cc.attrs.system.build.system.link}">
                            <a href="#{cc.attrs.system.build.system.link}" style="color: #fff"><i class="fa fa-external-link"></i></a>
                        </small>
                    </h4>
                </div>
                <div class="col-lg-2" style="text-align: right;">
                    <a href="#" style="color: #fff"><h4><i class="fa fa-refresh" /></h4></a>
                </div>              
            </div>
            <div class="box-body">
                <div class="row">
                    <div class="col-lg-12">
                        <span jsf:rendered="#{not empty cc.attrs.system.model.domain}">#{cc.attrs.system.model.domain} / </span>#{cc.attrs.system.model.classification}
                    </div>
                </div> 
                <div class="row">
                    <div class="col-lg-4" style="font-size: 5em;">
                        <i class="fa #{empty cc.attrs.system.build ? 'fa-exclamation-triangle' : 'fa-check'}" />
                    </div>
                    <div class="col-lg-8" style="text-align: right;" jsf:rendered="#{not empty cc.attrs.system.build}">
                        <p style="font-size: 20px;">
                            <a href="#" style="color: #fff"><i class="fa fa-cloud-download"/></a>
                            <a href="#" style="color: #fff">#{cc.attrs.system.build.build.projectVersion}</a>
                            <a href="#" style="color: #fff">#{cc.attrs.system.build.build.build}</a>
                        </p>

                        <p><i class="fa fa-code-fork"/> #{cc.attrs.system.build.build.scm}</p>
                        <p><i class="fa fa-clock-o"/> #{cc.attrs.system.build.date}</p>
                    </div>
                </div>


<!--                <div style="text-align: center; font-size: 30px;" jsf:rendered="#{empty cc.attrs.system.build}">
                    <i class="fa fa-spinner fa-spin" style=""></i>
                </div>-->
            </div>

<!--            <span jsf:id="loaded" jsf:rendered="#{not cc.attrs.system.loaded}" style="display: none" > 
                <f:ajax execute="@this" render="#{cc.clientId}:system" listener="#{dashboardVC.test(cc.attrs.system.model.guid)}"/>
                <script >$(function(){document.getElementById('#{cc.clientId}:loaded').click();return false;});</script>
            </span>
            -->
                        <!--<div class="overlay" jsf:rendered="#{not cc.attrs.system.loaded}"></div>-->
            <!--                            <script type="text/javascript"> 
                            $(function(){
                                    jsf.ajax.request('#{cc.clientId}:loaded',null,
                                            {'javax.faces.behavior.event':'action','execute':'#{cc.clientId}:loaded','render':'#{cc.clientId}:system'});});
                            </script>-->
        </div>            
    </composite:implementation>
</html>