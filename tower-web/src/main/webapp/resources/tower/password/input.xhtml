<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:composite="http://xmlns.jcp.org/jsf/composite"
	  xmlns:jsf="http://xmlns.jcp.org/jsf"
          xmlns:jel="http://xmlns.lorislab.org/jel/jsf"
	  xmlns:f="http://xmlns.jcp.org/jsf/core"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:h="http://xmlns.jcp.org/jsf/html">

	<composite:interface>
		<composite:attribute name="controller" required="true"/>
		<composite:attribute name="value" required="true"/>
		<composite:attribute name="required" required="false" default="false"/>
		<composite:attribute name="dialog" required="true"/>
		<composite:attribute name="render" required="false" default="editForm:b:password:input"/>
	</composite:interface>

	<composite:implementation>		
		<div class="control-group">
			
			<label class="control-label" jsf:for="input">Password</label>
			<div class="input-group">
				<span class="input-group-addon"
					  jsf:rendered="#{jel:isNotMessage(cc.clientId,':input')}">
					<i class="icon-doc-text"></i>
				</span>

				<span class="input-group-addon alert-danger"
					  jsf:rendered="#{jel:isMessage(cc.clientId,':input')}">
					<i class="icon-attention alert-danger"></i>
				</span>	
				
				<h:inputText id="input" class="form-control" value="#{cc.attrs.value}" required="#{cc.attrs.required}" readonly="true">
					<f:passThroughAttribute name="type" value="password" />
				</h:inputText>
				
				<span class="input-group-btn">
					<button name="" type="button" class="btn btn-primary"  jsf:rendered="#{cc.attrs.controller.changePasswordAction.available}" 
							jsf:action="#{cc.attrs.controller.changePasswordAction.open}">		
						<f:ajax render="@this #{cc.attrs.dialog}:p:modalForm" execute="@this" onevent="function(d){if(d.status==='success')$('##{cc.attrs.dialog}\\\\:p\\\\:modal').modal('show');}"/>
						<i class="icon-lock"></i>
						<f:actionListener type="org.lorislab.jel.jsf.api.listener.ResetInputAjaxActionListener"  />
					</button>			
					<button name="" type="button" class="btn btn-primary"  jsf:rendered="#{cc.attrs.controller.clearPasswordAction.available}"
							jsf:action="#{cc.attrs.controller.clearPasswordAction.execute}">
						<f:ajax render="@this #{cc.attrs.render}" execute="@this" />
						<i class="icon-trash"></i>
					</button>
				</span>
			</div>
			
			<ui:repeat var="item" value="#{jel:message(cc.clientId,':input')}" >
				<span class="label label-danger">#{item.detail}</span>
			</ui:repeat>
		</div>			
	</composite:implementation>
</html>